# config.mk
#
# DO NOT EDIT THIS FILE.  IT HAS BEEN AUTOGENERATED BY CONFIGURE.
# If you have changed your settings, rerun configure.
#
# Created for MaGe by Jason Detwiler, June 2006
# Modified by MGMarino Feb 2007

# Please contact the author if any exceptions are found:
# jasondet@u.washington.edu. config.mk should be included at the TOP of the
# user's makefile

PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_TARNAME = @PACKAGE_TARNAME@
PACKAGE_VERSION = @PACKAGE_VERSION@

DESTDIR =


srcdir = @srcdir@
subdirs = @subdirs@
top_srcdir = @top_srcdir@

prefix = @prefix@
exec_prefix = @exec_prefix@

bindir = @bindir@
sbindir = @sbindir@
libexecdir = @libexecdir@
datadir = @datadir@
sysconfdir = @sysconfdir@
sharedstatedir = @sharedstatedir@
localstatedir = @localstatedir@
libdir = @libdir@
includedir = @includedir@
infodir = @infodir@
mandir = @mandir@
docdir = @docdir@

pkgdatadir = $(datadir)/$(PACKAGE_TARNAME)
pkgincludedir = $(includedir)/$(PACKAGE_TARNAME)


SHELL = @SHELL@

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_SCRIPT = @INSTALL_SCRIPT@

GREP = @GREP@
SED = @SED@


MAGEDIR=@MAGEDIR@

CLHEP_BASE_DIR = @CLHEP_BASE_DIR@
CLHEP_INCLUDE_DIR = @CLHEP_INCLUDE_DIR@
CLHEP_LIB_DIR = @CLHEP_LIB_DIR@

G4INSTALL = @G4INSTALL@
G4INCLUDE = @G4INCLUDE@
G4LIB = @G4LIB@
G4SYSTEM = @G4SYSTEM@

#list of packages to exclude from the build
PKG_SKIP := MJTools buildTools macros doc @MGSKIPLIBS@ 

#### You should not need to make modifications below this line ####

PACKAGES := $(dir $(wildcard $(MAGEDIR)/*/GNUmakefile.in))
PACKAGES := $(subst $(MAGEDIR)/,, $(PACKAGES))
PACKAGES := $(subst /,, $(PACKAGES))
PACKAGES := $(filter-out $(PKG_SKIP), $(PACKAGES))

G4WORKDIR=@G4WORKDIR@
G4SYSTEM=@G4SYSTEM@
MGTMPDIR=$(G4WORKDIR)/tmp/$(G4SYSTEM)

MGLIBS := $(subst -l, -l, $(join $(addprefix -L$(MGTMPDIR)/, $(PACKAGES)), $(addprefix -l, $(PACKAGES))))

# Basic flags

MGCPPFLAGS := $(addprefix -I$(MAGEDIR)/, $(PACKAGES))
CPPFLAGS += @EXTRACPPFLAGS@ $(MGCPPFLAGS)

# ROOT
CPPFLAGS += @ROOTAUXCFLAGS@ @ROOTCFLAGS@ 
EXTRALIBS += -L@ROOTLIBDIR@ @ROOTLIBS@ @ROOTAUXLIBS@ 

# MGDO
CPPFLAGS += @MGDO_CFLAGS@
EXTRALIBS += @MGDO_LIBS@

# GDML
CPPFLAGS += @NO_G4GDML_FLAG@
EXTRALIBS += @G4GDML_LIB_DIR@ @G4GDML_LIBS@

CPPFLAGS += @CPPFLAGS@
LDFLAGS += @LDFLAGS@
EXTRALIBS += @LDFLAGS@

# An option for the full output. Geant4 scripts will echo all the make commands
# if this variable is defined as non-empty
CPPVERBOSE = @CPPVERBOSE@

# Add MGLIBS at the end (because we are using static libs)
EXTRALIBS += $(MGLIBS) 

ifdef MJDEBUG
  G4DEBUG := 1
  G4NO_OPTIMISE := 1
#else
#  CXXFLAGS += -O2
endif

EXTRALIBS += @EXTRALIBS@ 
ROOTSOFLAGS = @ROOTSOFLAGS@ 
ROOTSOSUFFIX = so

#ifdef G4LIB_BUILD_SHARED
MGLIBEXTSHARED = @MGLIBEXTSHARED@
#else
# This is temporary solution to the static/shared problem.  It forces MaGe to be built with static libraries
# which was how the makefile worked previously.  This is not a permanent solution but rather a patch so that
# MaGe works easily until I figure out the best method for fixing this.  M. Marino 
#MGLIBEXT = $(MGLIBEXTSHARED)
MGLIBEXT = a
G4LIB_BUILD_STATIC=1
#endif

